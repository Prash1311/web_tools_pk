<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Resizer & Compressor</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 500px; margin: 40px auto; }
  label { display: block; margin-top: 15px; }
</style>
</head>
<body>

<h2>Image Resizer & Compressor</h2>

<input type="file" id="upload" accept="image/*">

<label>
  Width (px):
  <input type="number" id="w" value="800">
</label>

<label>
  Height (px):
  <input type="number" id="h" value="600">
</label>

<label>
  Compression: <span id="qval">80</span>%
  <input type="range" id="quality" min="10" max="100" value="80">
</label>

<br>
<button onclick="processImage()">Process Image</button>

<br><br>
<canvas id="canvas" style="border:1px solid #ccc;"></canvas>

<br><br>
<a id="download" style="display:none;">Download Image</a>

<script>
const qualitySlider = document.getElementById("quality");
const qval = document.getElementById("qval");

qualitySlider.oninput = () => qval.textContent = qualitySlider.value;

function processImage() {
  const fileInput = document.getElementById("upload");
  if (!fileInput.files.length) {
    alert("Please select an image");
    return;
  }

  const img = new Image();
  img.onload = () => {
    const canvas = document.getElementById("canvas");
    const w = parseInt(document.getElementById("w").value);
    const h = parseInt(document.getElementById("h").value);
    const quality = parseInt(qualitySlider.value) / 100;

    canvas.width = w;
    canvas.height = h;
    canvas.getContext("2d").drawImage(img, 0, 0, w, h);

    const dataURL = canvas.toDataURL("image/jpeg", quality);

    const download = document.getElementById("download");
    download.href = dataURL;
    download.download = "compressed.jpg";
    download.style.display = "inline-block";
    download.textContent = "Download Image";
  };

  img.src = URL.createObjectURL(fileInput.files[0]);
}
</script>

</body>
</html>
